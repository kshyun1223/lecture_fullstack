# 20221122 기록
## 작업 기록
### 성공한 일
```sql
query = ('''
    WITH
    temp_table AS ({select}),
    temp_name AS (SELECT name, code FROM companylist WHERE
    {query_or})
    SELECT * FROM temp_table INNER JOIN temp_name ON temp_table.code = temp_name.code ORDER BY volume DESC LIMIT 28;
    '''.format(select=remove_braket(select), query_or=remove_braket(query_or)))
    cursor.execute(query)
    connection.commit()
```

- 우려했던 부분: 일단 종목정보를 모아와서 WITH 테이블을 만든 다음에 여기의 종목코드를 가지고 다른 WITH 테이블에 이름을 받아와서 앞의 것과 조인해야 한다고 생각했는데, WITH문은 한번의 명령 안에서만 유지되기 때문에 난감했음.
- 해결한 방법: 먼저 전체 종목을 대상으로 종목정보 테이블과 이름 테이블을 만든 다음에 조인을 하고나서 나중에 정렬하고 자름

### 시도한 일
- sql에 리터럴로 쿼리문을 입력했을 때는 잘 됐는데, 파이썬에서 반복문으로 만들어낸 쿼리문은 에러가 떴음. 