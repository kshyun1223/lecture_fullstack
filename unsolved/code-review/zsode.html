<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Dosis&family=Nanum+Myeongjo&family=Silkscreen&display=swap"
    rel="stylesheet">
</head>

<body>
  <script>
    // *element setting
    //동적으로 태그 생성
    //간단한 구조기에 body > div로만 구성
    const button = document.createElement('div');
    button.textContent = 'start';

    let body = document.body;
    console.dir(body);
    body.appendChild(button); //생성완료


    // *default style setting
    //body와 하위엘리먼트의 기본 스타일 세팅
    function flexSet(element, flex, justify, align) {
      element.style.display = flex;
      element.style.justifyContent = justify;
      element.style.alignItems = align;
    }

    flexSet(body, 'flex', 'center', 'center');
    body.style.margin = 0;
    body.style.padding = 0;

    body.style.width = '100vw';
    body.style.height = '100vh';

    button.style.padding = '10% 10%';
    button.style.backgroundColor = 'black';
    button.style.color = 'white';
    button.style.clipPath = 'circle(40%)';

    button.style.fontSize = '1.5em';
    button.style.fontFamily = 'Dosis';

    button.style.cursor = 'pointer';

    button.style.transition = '0.6s';


    // *Event setting

    // *click event strings
    //이벤트에 사용할 텍스트요소들
    //첫번째 클릭이벤트 텍스트
    let stringOne = ['if all you have a hammer, everything looks like a nail'];
    //두번째 클릭이벤트 텍스트
    let stringTwo = ['가진것이 망치뿐이면, 모든 것이 못으로 보인다.'];
    //이벤트 후 텍스트
    let stringEnd = ['done']; 


    //첫번째 클릭이벤트 스타일
    function funcOne() {
      button.textContent = stringOne;
      button.style.backgroundColor = 'transparent';
      button.style.color = 'black';
      button.style.clipPath = 'none';
    }

    //두번째 클릭이벤트 스타일
    function funcTwo() {
      button.textContent = stringTwo;
      button.style.fontFamily = 'Nanum Myeongjo';
      button.style.transition = '0.6s';

      button.addEventListener('mouseover', function () {
        body.style.backgroundColor = '#999';
      });
      button.addEventListener('mouseout', function () {
        body.style.backgroundColor = 'white';
      });
    }

    //*click event
    let isSwitch = true;
    button.addEventListener('click', function () {
      if (isSwitch === true) {
        // isSwitch = false;
        // 첫 번째 이벤트
        setTimeout(funcOne, 1000);
        
        button.addEventListener('click', function () {
          if (isSwitch === true) {
            isSwitch = false;
            //두 번째 이벤트
            setTimeout(funcTwo, 1000);
            
          } else {
            // isSwitch = true;
            //이벤트 후 마지막 마크업 스타일
            button.textContent = stringEnd;
            button.style.padding = '10% 10%';
            button.style.backgroundColor = 'white';
            button.style.color = 'black';
            button.style.clipPath = 'circle(40%)';
            button.style.fontFamily = 'none';
            body.style.backgroundColor = 'black';

            button.addEventListener('mouseover', function () {
              body.style.backgroundColor = 'black';
            });
            button.addEventListener('mouseout', function () {
              body.style.backgroundColor = 'black';
            });
          }
        });
      } else {
        // isSwitch = true;
      }
    });

  //*문제 사항 ------------------------------------------------------------
  //click event에서 addEventListener의 주체를 변경(button → body)하면 이벤트가 꼬이는 현상 발생 : 이벤트가 차례대로 실행되어 처음으로 돌아가는 과정이 스무스하지 않음 
  // function funcTwo()에서 추가한 마우스오버이벤트가 이벤트 마지막에서 중복발생되는 경우 발생. .removeEventListener() 작동되지 않음. 재할당했으나 추후 문제가 생길 여지 있으니 고려해야 함

  </script>
</body>

</html>